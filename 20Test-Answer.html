<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>YOUR NAME - BUILD TEST</title>

<script src="libraries/createjs_min.js"></script>
<script src="libraries/zim_doc.js"></script>

<script>

// SCALING OPTIONS
// scaling can have values as follows with full being the default
// "fit"    sets canvas and stage to dimensions and scales to fit inside window size
// "outside"    sets canvas and stage to dimensions and scales to fit outside window size
// "full"    sets stage to window size with no scaling
// "tagID"    add canvas to HTML tag of ID - set to dimensions if provided - no scaling

var scaling = "fit"; // this will resize to fit inside the screen dimensions
var width = 1024;
var height = 768;
var color = brown;
var outerColor = darker;

// as of ZIM 5.5.0 you do not need to put zim before ZIM functions and classes
var frame = new Frame(scaling, width, height, color, outerColor);
frame.on("ready", function() {
    zog("ready from ZIM Frame"); // logs in console (F12 - choose console)

    var stage = frame.stage;
    var stageW = frame.width;
    var stageH = frame.height;

    // Build-it Test for IM2020 - THREE HOURS DURATION
    // Put your name in the Title and rename this doc to yourname.html
    // Make sure that you unzip the folder
    // See the video that demonstrates what you are to build

    // PART 0 - TITLE BAR INSTRUCTIONS

    // 1. Make a variable called instructions
    // Have it store a Label that says "make a skunk"
    // Make it look like in the video
    // using a backgroundColor of dark
    // and a paddingHorizontal of 100
    // align the text in the center
    // centerReg it and position it top center
    // set the alpha to .8

// [2]
    var instructions = new Label({
        text:"make a skunk",
        color:white,
        backgroundColor:dark,
        paddingHorizontal:100,
        size:30,
        align:"center"
    }).centerReg().alp(.8).pos(0,30,CENTER);


    // PART 1 - MAKING THE SKUNK

    var skunk;
    makeSkunk();
    function makeSkunk() {

// [3]

        // 2. Store a Container 160x200 in skunk - do not add it yet
        skunk = new Container(160,200);

        // 3. Make a variable body hold a Circle 8 radius and black
        // then size the body perhaps with siz() and center it on skunk
        var body = new Circle(80, black)
            .siz(160,200)
            .center(skunk);

        // 4. Create a new Triangle and position it at the center bottom of skunk
        // it has sides of 30 and is red
        new Triangle(30,30,30, red)
            .pos(0,0,CENTER,BOTTOM,skunk)

        // 5. centerReg the skunk on the stage
        skunk.centerReg();

// [3]
        // 6. Create a ZIM series of five objects:
        // four Circles with a Rectangle in the middle.
        // Two white circles with 15 radius
        // and two black circles with 10 radius
        // The rectangle is 30x150 and is white with a corner of 10
        var s = series(
            new Circle(15, white),
            new Circle(10, black),
            new Rectangle({width:30, height:150, color:white, corner:10}),
            new Circle(10, black),
            new Circle(15, white),
        )

        // 7. Tile the series with 5 columns and 1 row with 30 spacing
        // store it in a variable called parts
        // center it on skunk and move it down 250
        // make it draggable
        // and animate the alpha from 0 to 1 in a time of 200ms
        // after waiting 500ms
        // run a sequence of 250ms
        var parts = new Tile(s, 5, 1, 30)
            .center(skunk)
            .mov(0,250)
            .drag()

// [2]
            .animate({
                wait:500,
                props:{alpha:0},
                from:true,
                sequence:250,
                time:200
            });

        // 8. Add a pressup event to parts to call a function
        // in the pressup function do the following:
        // store a variable called count and set it to 0
        // loop through the parts
        // and if the part is hitting the body then increase the count
        // after the loop, if the count is equal to the numChildren of parts
        // then do 8b.


// [3]
        parts.on("pressup", function () {
            var count = 0;
            parts.loop(function (part) {
                if (part.hitTestBounds(body)) {
                    count++;
                }
            });

            // 8b. Set the mouseChildren property of skunk to false
            // this will stop the drag on the parts
            // Animate the skunk off the bottom of the stage
            // after waiting 500ms - a time of 2000ms is fine
            // When the animation is done call makePath


// [3]
            if (count == parts.numChildren) {
                skunk.mouseChildren = false;
                // makePath()
                skunk.animate({
                    props:{y:stageH+150},
                    wait:500,
                    time:2000,
                    call:makePath
                });
            }
        });

        stage.update();
    } // end function makeSkunk


    // PART 2 - MAKING THE PATH
    // You can comment out PART 1 if you want
    // and work on PART 2 by uncommenting the makePath() below
    // makePath needs a skunk to work
    // but you can just set skunk to a new Circle(80)
    // If you got your skunk to work - then no problem!

    // makePath();
    function makePath() {

// [1]
        // 9. Change the text of the instructions to "follow path"
        instructions.text = "follow path";

        // 10. Create a Squiggle and store it in a variable called path
        // make it dark with a thickness of 70 and set interactive to false
        // Use the following points for your Squiggle:
        // points: [[241.8,-193.6,0,0,-152.9,-5.7,152.9,5.7],[423.6,-53.5,0,0,90,-102.8,-90,102.8],[522.7,84,0,0,-60.3,-58.5,60.3,58.5],[225.3,324.8,0,0,251.2,31.1,-251.2,-31.1],[-52.1,196.2,0,0,162.7,-53,-162.7,53],[-215,-23.9,0,0,-35.5,105.1,35.5,-105.1],[47.4,-195.9,0,0,-122.1,-0.4,122.1,0.4]]
        // center it on the stage and set the alpha to .1

// [2]
        var path = new Squiggle({
            color:dark,
            thickness:70,
            points:[[241.8,-193.6,0,0,-152.9,-5.7,152.9,5.7],[423.6,-53.5,0,0,90,-102.8,-90,102.8],[522.7,84,0,0,-60.3,-58.5,60.3,58.5],[225.3,324.8,0,0,251.2,31.1,-251.2,-31.1],[-52.1,196.2,0,0,162.7,-53,-162.7,53],[-215,-23.9,0,0,-35.5,105.1,35.5,-105.1],[47.4,-195.9,0,0,-122.1,-0.4,122.1,0.4]],
            interactive:false
        }).alp(.1).center();


// [2]
        // 11. Scale the skunk to .3 and rotate it -90 to face along the path
        // set it to the top layer on the stage
        // and animate it along the path using the props path property ;-)
        // set drag to true and an ease of linear
        skunk
            .sca(.3)
            .rot(-90)
            .top()
            .animate({
                props:{path:path},
                drag:true,
                ease:"linear"
            });

        // 12. Add a mousedown event to the skunk
        // so it calls makeGrass when pressed
        // this event should only happen once
        // so set the fourth parameter of the on() method to true
        // this will make the event only happen once

// [1]
        skunk.on("mousedown", makeGrass, false, true);

        stage.update();
    }

    // PART 3 - MAKING THE GRASS
    // It is difficult to make this section without a path
    // but you can dig in and get part marks if you need to

    function makeGrass() {

        // 13. Make a Pen and store it in a variable called pen
        // set the color to either green or "green" using a ZIM VEE (Pick) value
        // set the penType to grass
        // and set the spread to a min of 20 to a max of 80 using a ZIM VEE value
        // locate the pen at the skunk
        // and set it back one layer with ord()

// [2]
        var pen = new Pen({
            color:[green, "green"],
            penType:"grass",
            spread:{min:20, max:80}
        })
            .loc(skunk)
            .ord(-1);

        // 14. Add a function to the Ticker
        // have the function locate the pen at the skunk

// [1]
        Ticker.add(function () {
            pen.loc(skunk);
        });

        // 15. With a timeout, call a function after 10000 ms
        // in the function, create a Button with a label of "FREE ME!"
        // make it 250x120 with backgroundColor of black
        // and a rollBackgroundColor of dark
        // the color should be white
        // center it on the stage
        // and animate its alpha from 0 to 1 in default time

// [3]
        timeout(10000, function () {
            var button = new Button({
                label:"FREE ME!",
                width:250,
                height:120,
                corner:30,
                backgroundColor:black,
                rollBackgroundColor:dark,
                color:white
            })
                .center()
                .alp(0)
                .animate({alpha:1})

            // 15b. chain a tap() to the button
            // that calls a function
            // and in that function
            // remove the button
            // set the instructions to "you are free"
            // stop animation on the skunk
            // set the skunk to drag and a rotation of -45

// [2]
                .tap(function () {
                    button.removeFrom();
                    instructions.text = "you are free"
                    skunk
                        .stopAnimate()
                        .drag()
                        .rot(-45);
                });
        });

        // 16. You are done!!
        // ZIP all your files except the video
        // Call your ZIP file your name
        // Raise your hand and we will turn you back on
        // and have you upload the file to SLATE

        // Please exit quietly
        // Do not wait in the halls outside due to noise

        stage.update();
    }


}); // end of ready

</script>

<meta name="viewport" content="width=device-width, user-scalable=no" />

</head>

<body>
<!-- canvas with id="myCanvas" is made by zim Frame -->
</body>
</html>
